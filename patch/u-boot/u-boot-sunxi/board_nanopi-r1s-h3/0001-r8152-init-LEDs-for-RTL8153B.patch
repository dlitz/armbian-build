From d233c48f1984a6cee4e63a8cd3b05108bf666f97 Mon Sep 17 00:00:00 2001
From: Darsey Litzenberger <dlitz@dlitz.net>
Date: Tue, 13 Jun 2023 23:43:54 -0600
Subject: [PATCH 1/3] r8152: init LEDs for RTL8153B

---
 drivers/usb/eth/r8152.c | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/drivers/usb/eth/r8152.c b/drivers/usb/eth/r8152.c
index 1aaa5a79b3..7ae4f23670 100644
--- a/drivers/usb/eth/r8152.c
+++ b/drivers/usb/eth/r8152.c
@@ -1360,6 +1360,13 @@ static void r8153b_init(struct r8152 *tp)
 	rtl_tally_reset(tp);
 	r8153b_hw_phy_cfg(tp);
 	r8152b_enable_fc(tp);
+
+	/* enable LEDs
+	 * LED0: activity
+	 * LED1: link 10/100/1000 Mbps
+	 */
+	ocp_data = 0x78;
+	ocp_write_word(tp, MCU_TYPE_PLA, PLA_LEDSEL, ocp_data);
 }
 
 static void rtl8152_unload(struct r8152 *tp)
-- 
2.39.2

